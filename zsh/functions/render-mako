(
(( $+commands[python] )) || hash python=${commands[python2]}
  python - "$@" <<\eof
from __future__ import print_function
from mako.template import Template
import sys
import yaml

with open(sys.argv[1]) as yaml_file:
    context = yaml.load(yaml_file.read())

with open(sys.argv[2]) as template:
    template = Template(template.read())

print(template.render(**context).rstrip())
eof
)
